<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>eMenu Taipei â€” è¡Œç¨‹åŠ©æ‰‹</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <style>
    :root{
      --glass-bg: rgba(255,255,255,0.86);
      --card-radius: 18px;
    }
    html,body,#app { height:100%; }
    body{
      font-family: 'Noto Sans TC', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background-color:#0f172a;
      margin:0;
    }
    /* hide scrollbar on WebKit */
    .no-scrollbar::-webkit-scrollbar { display:none; }
    .no-scrollbar { -ms-overflow-style:none; scrollbar-width:none; }
    /* small fade animation */
    .fade-enter-active, .fade-leave-active { transition: opacity .25s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }
    /* safe bottom padding for phones */
    .pb-safe { padding-bottom: calc(env(safe-area-inset-bottom) + 12px); }
    
    /* è‡ªè¨‚é¡åˆ¥ï¼šç”¨æ–¼å·²å®Œæˆçš„æ·±ç°è‰²æ–‡å­—èˆ‡åˆªé™¤ç·š */
    .task-done {
        text-decoration: line-through;
        color: #6b7280; /* Tailwind gray-500 */
    }

    /* ğŸ¯ èª¿æ•´ Dock æ¨£å¼ä»¥æ¨¡æ“¬ iPhone Dock */
    .iphone-dock {
        background: rgba(255,255,255,0.68);
        backdrop-filter: blur(10px);
        border-radius: 28px;
        box-shadow: 0 8px 40px rgba(0,0,0,0.12);
        padding: 0.6rem 1.2rem;
        border: 1px solid rgba(255,255,255,0.35);
    }

    .iphone-dock button i { font-size: 1.25rem; }

    /* å¡ç‰‡ç´°ç¯€ */
    .glass-card { border-radius: var(--card-radius); background: rgba(255,255,255,0.88); border: 1px solid rgba(255,255,255,0.35);
    padding: 0.75rem; box-shadow: 0 8px 24px rgba(2,6,23,0.06); }

  </style>
</head>

<body>
  <div id="app" class="relative min-h-screen flex flex-col">

    <div class="absolute inset-0 z-0 pointer-events-none">
      <img src="./IMG_6732.jpeg?auto=format&fit=crop&w=2000&q=80"
           class="w-full h-full object-cover opacity-100" alt="Taipei Background">
      <div class="absolute inset-0 bg-gradient-to-b from-slate-100/75 via-slate-100/55 to-slate-200/85"></div>
    </div>

    <main class="relative z-10 flex-1 overflow-y-auto no-scrollbar pb-safe pt-6 px-4">

      <div class="flex items-center justify-between mb-4">
       
        <div>
          <h1 class="text-2xl font-bold text-gray-800">eMenu Taipei <span class="ml-1 text-sm">ğŸ‡¹ğŸ‡¼</span></h1>
          <p class="text-xs text-gray-500 mt-1">å°åŒ— 12/15 â€” 12/18</p>
        </div>
        <div class="text-right">
          <div class="text-[10px] font-bold text-emerald-700 bg-emerald-100 px-2 py-1 rounded-md border border-emerald-200 inline-block">å³æ™‚åŒ¯ç‡</div>
          <div class="text-xs font-bold text-gray-600 mt-1">
            1 TWD â‰ˆ 
            <span class="text-emerald-600 text-sm">{{ formattedRate }}</span> HKD
            <div class="text-[10px] text-gray-400">æ›´æ–°ï¼š{{ lastRateUpdateLabel }}</div>
          </div>
        </div>
      </div>

      <div class="mb-4">
        <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2">
          <button @click="currentTab = 'è¡Œå‰'" 
                  class="flex-shrink-0 w-14 h-20 rounded-xl flex flex-col items-center justify-center text-xs font-semibold transition-transform"
                  :class="currentTab === 'è¡Œå‰' ?
                  'bg-gradient-to-br from-sky-200 to-teal-100 scale-105 shadow-md text-gray-900 border border-sky-200' : 'bg-white/80 border border-white/40 text-gray-600'">
             <i class="ph ph-list text-xl mb-1"></i>
             <span>è¡Œå‰</span>
          </button>
          
          <button v-for="(d, i) in days" :key="i"
                  @click="selectDay(i); currentTab = 'è¡Œç¨‹'"
                  class="flex-shrink-0 w-14 h-20 rounded-xl flex flex-col items-center justify-center transition-transform"
                  :class="selectedDay === i && currentTab === 'è¡Œç¨‹' ?
                  'bg-gradient-to-br from-sky-200 to-teal-100 scale-105 shadow-md text-gray-900 border border-sky-200' : 'bg-white/80 text-gray-600 border border-white/40'">
            <span class="text-[10px] font-semibold text-sky-600/90 mb-0.5">Day {{ i + 1 }}</span>
            <span class="text-[12px] font-medium">{{ d.week }}</span>
            <span class="text-base font-bold mt-0.5">{{ d.date }}/12</span>
          </button>
        </div>
      </div>

      <div class="space-y-4 mb-4">
        <div class="glass-card">
          <div class="flex items-center mb-2">
             <i class="ph ph-map-pin-simple-area text-sm text-gray-500 mr-1"></i>
             <span class="text-xs font-bold text-gray-600">å°åŒ—å¸‚</span>
          </div>
    
          <div class="flex h-24">
            <div class="flex-1 flex items-center justify-start">
                <div class="text-[64px] font-bold text-gray-800 leading-none">{{ weather.temp }}Â°</div>
            </div>

            <div class="flex-shrink-0 w-24 flex items-center justify-center">
                <i :class="weatherIconClass" class="text-[64px] text-sky-500 leading-none"></i>
            </div>
            
            <div class="flex-shrink-0 w-32 flex flex-col justify-center items-end text-right">
                <div class="text-base text-gray-600 font-bold mb-1">
                    {{ weather.desc }}
                </div>
                <div class="text-xs text-gray-500">é™é›¨æ©Ÿç‡ {{ weather.rain }}%</div>
            </div>
          </div>
        </div>

        <transition name="fade">
          <div v-if="shouldShowFlightCard" 
                 class="rounded-2xl p-4 text-white shadow-lg" 
                 style="background: linear-gradient(135deg,#60a5fa 0%,#2dd4bf 100%);">
              <div class="flex justify-between items-center mb-3">
                <div class="text-xs font-bold bg-white/20 px-2 py-1 rounded">FLIGHT</div>
                <div class="text-xs text-right">
                    <div class="font-mono font-semibold text-lg">{{ activeFlight.depTime }}</div>
                    <div class="text-xs opacity-80 mt-1">Arr. {{ activeFlight.arrTime }}</div>
                </div>
              </div>

              <div class="flex items-center justify-between">
                <div class="flex flex-col items-center">
                  <div class="text-[11px] opacity-80">from</div>
                  <div class="text-3xl font-bold tracking-widest">{{ activeFlight.fromCode }}</div>
                  <div class="text-sm font-semibold opacity-80 text-white/90 mt-1">{{ activeFlight.fromTerminal }}</div>
                </div>

                <div class="flex-1 px-4 text-center">
                  <i class="ph ph-airplane-tilt text-2xl"></i>
                  <div class="h-0.5 bg-white/30 my-3"></div>
                  <div class="text-xs opacity-75">{{ activeFlight.note }}</div>
                </div>

                <div class="flex flex-col items-center">
                  <div class="text-[11px] opacity-80">to</div>
                  <div class="text-3xl font-bold tracking-widest">{{ activeFlight.toCode }}</div>
                   <div class="text-sm font-semibold opacity-80 text-white/90 mt-1">{{ activeFlight.
